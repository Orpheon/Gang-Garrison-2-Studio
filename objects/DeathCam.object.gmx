<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-130000</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>cursor_sprite = -1;
alarm[0] = 60 / global.delta_factor;
alarm[2] = max(1, min(150/global.delta_factor, global.myself.alarm[5]));

zoom=1;
zooming=false;
killmessage = "";
DeathCamS=-1
hp=0;
maxHp=0;
if instance_exists(NoticeO) with NoticeO instance_destroy();
if instance_exists(Balancer) with Balancer instance_destroy();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>cursor_sprite = CrosshairS;
view_xview=oldxview;
view_yview=oldyview;
if sprite_exists(DeathCamS) sprite_delete(DeathCamS);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>instance_destroy();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if instance_exists(WinBanner)
{
    instance_destroy();
    exit;
}

if(lastDamageSource == global.DAMAGE_SOURCE_SENTRYTURRET and killedby.sentry)
{
    view_xview=killedby.sentry.x-400;
    view_yview=killedby.sentry.y-300;
    hp=killedby.sentry.hp;
    maxHp=killedby.sentry.maxHp;
    killmessage = "You were killed by the autogun of";
}
else if(killedby.object != -1)
{
    view_xview=killedby.object.x-400;
    view_yview=killedby.object.y-300;
    hp=killedby.object.hp;
    maxHp=killedby.object.maxHp;
    killmessage = "You were killed by";
}
else
{
    view_xview=killedby.lastKnownx-400;
    view_yview=killedby.lastKnowny-300;
    hp=0;
    maxHp=0;
    killmessage = "You were killed by the late";
}

//screen_redraw();

var tempfile;
tempfile = temp_directory + "/deathcam.png";
if !file_exists(tempfile)
    screen_save_part(tempfile,0,0,800,600);
DeathCamS=sprite_add(tempfile,1,0,0,400,300);
file_delete(tempfile);

zooming=true;
playsound(view_xview[0]+400,view_yview[0]+300,DeathCamSnd);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>    xoffset = view_xview[0];
    yoffset = view_yview[0];
    xsize = view_wview[0];
    ysize = view_hview[0];
    
if DeathCamS==-1 exit;

if zooming==true{
    if zoom &lt; 2 zoom += 0.1 * global.delta_factor;
}
draw_sprite_ext(DeathCamS,0,view_xview+400,view_yview+300,zoom,zoom,0,c_white,1);
draw_rectangle_color(view_xview,view_yview,view_xview+xsize,view_yview+100,c_black,c_black,c_black,c_black,0);
draw_rectangle_color(view_xview,view_yview+ysize-100,view_xview+xsize,view_yview+ysize,c_black,c_black,c_black,c_black,0);
draw_set_halign(fa_center);
draw_set_valign(fa_center);
if team == TEAM_RED draw_set_color(c_blue);
else draw_set_color(c_red);


draw_text_transformed(view_xview+xsize/2,view_yview+30, killmessage,2,2,0);
draw_text_transformed(view_xview+xsize/2,view_yview+60, sanitiseNewlines(name),2,2,0);
if maxHp != 0 {
    if killedby.object!=-1  {
        draw_healthbar(xoffset+xsize/2-18, yoffset+ysize-50-18, xoffset+xsize/2+18, yoffset+ysize-50+18, hp*100/maxHp,c_black,c_red,c_green,3,true,false);
        draw_sprite_ext(DeathCamHealthBarS,0,xoffset+xsize/2, yoffset+ysize-50,2,2,0,c_white,1);
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
